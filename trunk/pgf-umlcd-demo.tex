\documentclass{article}
\usepackage[margin=12mm]{geometry}

\usepackage{tikz}
\usepackage{pgf-umlcd}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings}
\usepackage{color}
\definecolor{listinggray}{gray}{0.92}
\lstset{ %
language=[LaTeX]TeX,
breaklines=true,
frame=single,
frameround=tttt,
basicstyle=\footnotesize\ttfamily,
backgroundcolor=\color{listinggray},
keywordstyle=\color{blue}\bfseries
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\demo}[1]{
\begin{minipage}{.5\linewidth}
\lstinputlisting{demo/#1}
\end{minipage}~~~~~~~~~~~~~~
\begin{minipage}{.45\linewidth}
\resizebox{\linewidth}{!}{
\input{demo/#1}
}
\end{minipage}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\example}[1]{
\lstinputlisting{demo/#1}
\resizebox{\linewidth}{!}{
\input{demo/#1}
}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{Drawing UML Class Diagram by using \texttt{pgf-umlcd}}
\author{Yuan Xu}
\maketitle
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\tableofcontents

\section{Simple examples}
\subsection{Class with attributes and operations}
\demo{class}

\subsubsection{Visibility of attributes and operations}
\demo{visibility}

\subsubsection{Abstract class and interface}
\demo{abstract-class}
\demo{interface}

\subsection{Inheritance and implement}
\subsubsection{Inheritance}
\demo{inheritance}
 
\subsubsection{Implement an interface}
\demo{implement-interface}

\subsection{Association, Aggregation and Composition}
\subsubsection{Association} 
\demo{association}
 
\subsubsection{Unidirectional association}
\demo{unidirectional-association}

\subsubsection{Aggregation}
\demo{aggregation}

\subsubsection{Composition}
\demo{composition}

\subsection{Package}
\demo{package}

\section{Full examples: Design Patterns}
\subsection{Abstract Factory}
\example{abstract-factory}

\end{document}
%%% Local Variables: 
%%% mode: Tex-PDF
%%% TeX-master: t
%%% End: 
